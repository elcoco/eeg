#!/usr/bin/python3
import pyqtgraph as pg
from pyqtgraph.Qt import QtCore, QtGui
import numpy as np

# Must be set before creating any widgets
pg.setConfigOption('background', 0.1)

# Create a grid with multiple items
win = pg.GraphicsWindow()
win.setWindowTitle('EEG')


plots = []
curves = []
datas = []
d_size = 1000
n_plots = 10

data1 = np.random.normal(size=d_size)

for i in range(1,n_plots + 1):
    d = np.random.normal(size=d_size)
    p = win.addPlot(row=i,col=1)
    c= p.plot(data1, pen=i)

    plots.append(p)
    curves.append(c)
    datas.append(d)


def update_ch1():
    global plots, curves, datas
    i = 0
    for curve in curves:
        datas[i][:-1] = datas[i][1:]
        datas[i][-1] = np.random.normal()
        curve.setData(datas[i])
        i += 1



timer = pg.QtCore.QTimer()
timer.timeout.connect(update_ch1)
timer.start(50)

QtGui.QApplication.instance().exec_()

